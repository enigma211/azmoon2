# ุฑุงูููุง ูุตุจ ู ูพฺฉุฑุจูุฏ ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช ุฒุฑูโูพุงู

## โ ูุตุจ ุงูุฌุงู ุดุฏู

ูพฺฉุฌ `zarinpal/zarinpal` ุจุง ููููุช ูุตุจ ุดุฏ ู ุชูุธูุงุช ุงููู ุงูุฌุงู ฺฏุฑุฏุฏ.

## ๐ ูุฑุงุญู ูพฺฉุฑุจูุฏ

### 1. ุฏุฑุงูุช Merchant ID ุงุฒ ุฒุฑูโูพุงู

1. ูุงุฑุฏ ูพูู ุฒุฑูโูพุงู ุดูุฏ: https://www.zarinpal.com/panel
2. ุงุฒ ููู ุณูุช ุฑุงุณุชุ ฺฏุฒูู **"ุฏุฑฺฏุงูโูุง ูพุฑุฏุงุฎุช"** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
3. **Merchant ID** ุฎูุฏ ุฑุง ฺฉูพ ฺฉูุฏ (ูุฑูุช: `XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX`)

### 2. ุชูุธู ูุชุบุฑูุง ูุญุท

ูุงู `.env` ุฑุง ูุฑุงุด ฺฉูุฏ ู ููุงุฏุฑ ุฒุฑ ุฑุง ุงุถุงูู/ุชูุธู ฺฉูุฏ:

```env
ZARINPAL_MERCHANT_ID=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
ZARINPAL_SANDBOX=true    # ุจุฑุง ุชุณุช trueุ ุจุฑุง ูุญุท ูุงูุน false
ZARINPAL_ZARINGATE=false # ุจุฑุง ูพุฑุฏุงุฎุช ูุณุชูู true
```

**ูฺฉุชู ููู:** ุฏุฑ ูุญุท ุชุณุช (Sandbox)ุ ุงุฒ Merchant ID ุชุณุช ุฒุฑูโูพุงู ุงุณุชูุงุฏู ฺฉูุฏ.

### 3. ุชูุธูุงุช ุงุฒ ูพูู ุงุฏูู

1. ูุงุฑุฏ ูพูู ุงุฏูู ุดูุฏ: `/admin`
2. ุงุฒ ููู **"ุชูุธูุงุช"** ฺฏุฒูู **"ุชูุธูุงุช ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช"** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
3. Merchant ID ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ
4. ุญุงูุช Sandbox ู ZarinGate ุฑุง ุชูุธู ฺฉูุฏ
5. ุฑู **"ุฐุฎุฑู ุชูุธูุงุช"** ฺฉูฺฉ ฺฉูุฏ

## ๐ง ุณุงุฎุชุงุฑ ูพุงฺฏุงู ุฏุงุฏู

ุฌุฏูู `payments` ุจุฑุง ุฐุฎุฑู ุชุฑุงฺฉูุดโูุง ุงุฌุงุฏ ุดุฏู ุงุณุช:

- `id`: ุดูุงุณู ุชุฑุงฺฉูุด
- `user_id`: ฺฉุงุฑุจุฑ ุฎุฑุฏุงุฑ
- `subscription_plan_id`: ูพูู ุงุดุชุฑุงฺฉ
- `authority`: ฺฉุฏ Authority ุงุฒ ุฒุฑูโูพุงู
- `amount`: ูุจูุบ ุจู ุชููุงู
- `status`: ูุถุนุช (pending, success, failed, canceled)
- `ref_id`: ฺฉุฏ ูพฺฏุฑ (RefID)
- `description`: ุชูุถุญุงุช
- `response_data`: ูพุงุณุฎ ฺฉุงูู ุงุฒ ุฒุฑูโูพุงู (JSON)
- `paid_at`: ุชุงุฑุฎ ูพุฑุฏุงุฎุช ูููู

## ๐ ูุญูู ุงุณุชูุงุฏู

### ุจุฑุง ฺฉุงุฑุจุฑุงู

1. ฺฉุงุฑุจุฑ ูุงุฑุฏ ูพุฑููุงู ุฎูุฏ ูโุดูุฏ
2. ฺฉ ุงุฒ ูพููโูุง ุงุดุชุฑุงฺฉ ุฑุง ุงูุชุฎุงุจ ูโฺฉูุฏ
3. ุฑู ุฏฺฉูู **"ุฎุฑุฏ ุงุดุชุฑุงฺฉ"** ฺฉูฺฉ ูโฺฉูุฏ
4. ุจู ุตูุญู ูพุฑุฏุงุฎุช ูุฏุงุช ูโุดูุฏ
5. ุฑู **"ูพุฑุฏุงุฎุช ุงุฒ ุทุฑู ุฒุฑูโูพุงู"** ฺฉูฺฉ ูโฺฉูุฏ
6. ุจู ุฏุฑฺฏุงู ุฒุฑูโูพุงู ููุชูู ูโุดูุฏ
7. ูพุณ ุงุฒ ูพุฑุฏุงุฎุชุ ุจู ุณุงุช ุจุฑฺฏุดุชู ู ุงุดุชุฑุงฺฉ ูุนุงู ูโุดูุฏ

### ุจุฑุง ุงุฏูู

**ูุดุงูุฏู ุชุฑุงฺฉูุดโูุง:**
- ููู **"ูพุฑุฏุงุฎุชโูุง"** > **"ุชุฑุงฺฉูุดโูุง"**
- ูุดุงูุฏู ูุณุช ุชูุงู ุชุฑุงฺฉูุดโูุง ุจุง ููุชุฑ ูุถุนุช
- ูุดุงูุฏู ุฌุฒุฆุงุช ูุฑ ุชุฑุงฺฉูุด ุดุงูู ฺฉุฏ ูพฺฏุฑ

## ๐ ูุงูโูุง ุงุฌุงุฏ ุดุฏู

### Models
- `app/Models/Payment.php` - ูุฏู ุชุฑุงฺฉูุดโูุง

### Controllers
- `app/Http/Controllers/PaymentController.php` - ฺฉูุชุฑูุฑ ูพุฑุฏุงุฎุช

### Services
- `app/Services/ZarinpalService.php` - ุณุฑูุณ ูุฏุฑุช ูพุฑุฏุงุฎุช

### Resources (Filament)
- `app/Filament/Resources/PaymentResource.php` - ูุฏุฑุช ุชุฑุงฺฉูุดโูุง ุฏุฑ ูพูู ุงุฏูู
- `app/Filament/Pages/PaymentSettings.php` - ุตูุญู ุชูุธูุงุช ุฏุฑฺฏุงู

### Views
- `resources/views/payment/checkout.blade.php` - ุตูุญู ูพุฑุฏุงุฎุช
- `resources/views/filament/pages/payment-settings.blade.php` - ุตูุญู ุชูุธูุงุช

### Migrations
- `database/migrations/2025_10_11_182253_create_payments_table.php`

### Routes
```php
// Payment Routes
Route::get('/payment/{plan}', [PaymentController::class, 'show']);
Route::post('/payment/{plan}/request', [PaymentController::class, 'request']);
Route::get('/payment/verify', [PaymentController::class, 'verify']);
```

## ๐งช ุชุณุช ุฏุฑ ูุญุท Sandbox

1. `ZARINPAL_SANDBOX=true` ุฑุง ุฏุฑ `.env` ุชูุธู ฺฉูุฏ
2. ุงุฒ Merchant ID ุชุณุช ุงุณุชูุงุฏู ฺฉูุฏ
3. ุจุฑุง ุชุณุช ูพุฑุฏุงุฎุช ูููู ุงุฒ ฺฉุงุฑุชโูุง ุชุณุช ุฒุฑูโูพุงู ุงุณุชูุงุฏู ฺฉูุฏ

**ฺฉุงุฑุช ุชุณุช:**
- ุดูุงุฑู ฺฉุงุฑุช: `5022-2910-0000-0000`
- CVV2: ูุฑ ุนุฏุฏ
- ุชุงุฑุฎ ุงููุถุง: ูุฑ ุชุงุฑุฎ ุขูุฏู

## ๐ ุงููุช

- ุชูุงู ุงุทูุงุนุงุช ูพุฑุฏุงุฎุช ุฏุฑ ุฌุฏูู `payments` ุฐุฎุฑู ูโุดูุฏ
- Authority ุจู ุตูุฑุช ฺฉุชุง (unique) ุฐุฎุฑู ูโุดูุฏ
- ุชุฑุงฺฉูุดโูุง ูููู ูุงุจู ุชฺฉุฑุงุฑ ูุณุชูุฏ
- ูพุงุณุฎ ฺฉุงูู ุฒุฑูโูพุงู ุฏุฑ `response_data` ุฐุฎุฑู ูโุดูุฏ

## ๐ ฺฏุฒุงุฑุดโฺฏุฑ

ุงุฒ ูพูู ุงุฏูู ูโุชูุงูุฏ:
- ูุณุช ุชูุงู ุชุฑุงฺฉูุดโูุง ุฑุง ูุดุงูุฏู ฺฉูุฏ
- ุจุฑ ุงุณุงุณ ูุถุนุช ููุชุฑ ฺฉูุฏ
- ฺฉุฏ ูพฺฏุฑ ู ุฌุฒุฆุงุช ุฑุง ุจุจูุฏ
- ุชุงุฑุฎ ูพุฑุฏุงุฎุชโูุง ุฑุง ุจู ุตูุฑุช ุดูุณ ูุดุงูุฏู ฺฉูุฏ

## โ๏ธ ูฺฉุงุช ููู

1. **ูุจู ุงุฒ ุงูุชูุงู ุจู ูุญุท ูุงูุน:**
   - `ZARINPAL_SANDBOX=false`
   - Merchant ID ูุงูุน ุฑุง ูุงุฑุฏ ฺฉูุฏ
   - ุชุณุช ฺฉุงูู ุงูุฌุงู ุฏูุฏ

2. **Callback URL:**
   - URL ุณุงุช ุดูุง ุจุงุฏ ุฏุฑ ูพูู ุฒุฑูโูพุงู ุซุจุช ุดุฏู ุจุงุดุฏ
   - ุฏุฑ ูุญุท ููฺฉุงู ุงุฒ ngrok ุง ูุดุงุจู ุงุณุชูุงุฏู ฺฉูุฏ

3. **ูุจุงูุบ:**
   - ุญุฏุงูู ูุจูุบ ูุงุจู ูพุฑุฏุงุฎุช: 1000 ุชููุงู
   - ูุจุงูุบ ุจุงุฏ ุจู ุชููุงู ุจุงุดูุฏ

## ๐ ุนุจโุงุจ

**ุฎุทุง ุฏุฑ ุงุฌุงุฏ ุฏุฑุฎูุงุณุช:**
- Merchant ID ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ุงุชุตุงู ุงูุชุฑูุช ุฑุง ฺฺฉ ฺฉูุฏ
- ูุงฺฏโูุง ุฑุง ุฏุฑ `storage/logs` ุจุฑุฑุณ ฺฉูุฏ

**ุฎุทุง ุฏุฑ ุชุงุฏ ูพุฑุฏุงุฎุช:**
- Authority ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ูุจูุบ ุจุงุฏ ุจุง ูุจูุบ ุฏุฑุฎูุงุณุช ฺฉุณุงู ุจุงุดุฏ
- ุชุฑุงฺฉูุด ูุจุงุฏ ูุจูุงู ุชุงุฏ ุดุฏู ุจุงุดุฏ

## ๐ ูพุดุชุจุงู ุฒุฑูโูพุงู

- ูุจโุณุงุช: https://www.zarinpal.com
- ูุณุชูุฏุงุช: https://docs.zarinpal.com
- ูพุดุชุจุงู: support@zarinpal.com
