# راهنمای ایمپورت سوالات از فایل CSV

## دسترسی به صفحه ایمپورت

1. وارد پنل ادمین شوید: `http://127.0.0.1:8000/admin`
2. از منوی سمت راست، بخش **"بانک سوالات"** را باز کنید
3. روی **"ایمپورت سوالات"** کلیک کنید

## فرمت فایل CSV

فایل CSV شما باید دارای **7 ستون** به ترتیب زیر باشد:

| ستون | توضیحات | مثال |
|------|---------|------|
| 1 | شماره سوال (عدد صحیح) | 1 |
| 2 | متن سوال | "پایتخت ایران کدام شهر است؟" |
| 3 | متن گزینه 1 | "تهران" |
| 4 | متن گزینه 2 | "اصفهان" |
| 5 | متن گزینه 3 | "شیراز" |
| 6 | متن گزینه 4 | "مشهد" |
| 7 | شماره گزینه صحیح (1 تا 4) | 1 |

## نمونه فایل CSV

```csv
1,"پایتخت ایران کدام شهر است؟","تهران","اصفهان","شیراز","مشهد",1
2,"کدام یک از موارد زیر یک زبان برنامه‌نویسی است؟","HTML","CSS","JavaScript","XML",3
3,"بزرگترین سیاره منظومه شمسی کدام است؟","زمین","مریخ","مشتری","زهره",3
4,"چند ضلعی منتظم با 6 ضلع چه نام دارد؟","پنج ضلعی","شش ضلعی","هفت ضلعی","هشت ضلعی",2
```

یک فایل نمونه در مسیر `sample-questions.csv` در ریشه پروژه قرار دارد.

## نکات مهم

- فایل باید با encoding **UTF-8** ذخیره شود
- متن‌های فارسی باید داخل گیومه قرار گیرند
- شماره گزینه صحیح باید بین 1 تا 4 باشد
- حداکثر حجم فایل: 5 مگابایت
- در صورت وجود خطا در هر خط، آن خط رد می‌شود و سایر خطوط پردازش می‌شوند

## مراحل ایمپورت

1. **انتخاب آزمون**: از لیست آزمون‌ها، آزمونی که می‌خواهید سوالات را به آن اضافه کنید انتخاب کنید
2. **آپلود فایل CSV**: فایل CSV خود را انتخاب کنید
3. **کلیک روی "وارد کردن سوالات"**: پس از کلیک، فایل پردازش می‌شود
4. **بررسی نتیجه**: پیام موفقیت یا خطاها نمایش داده می‌شود

## عیب‌یابی

### خطای "تعداد ستون‌ها کافی نیست"
- اطمینان حاصل کنید که هر خط دقیقاً 7 ستون دارد
- از ویرایشگر متن مناسب (مثل Notepad++، VS Code) استفاده کنید

### خطای "شماره گزینه صحیح باید بین 1 تا 4 باشد"
- ستون آخر باید یکی از اعداد 1، 2، 3 یا 4 باشد

### مشکل در نمایش فارسی
- فایل را با encoding UTF-8 ذخیره کنید
- در Excel: Save As > CSV UTF-8
- در Google Sheets: File > Download > CSV

## ایجاد فایل CSV

### از Excel:
1. داده‌ها را در Excel وارد کنید
2. File > Save As
3. انتخاب فرمت: **CSV UTF-8 (Comma delimited)**

### از Google Sheets:
1. داده‌ها را در Google Sheets وارد کنید
2. File > Download > Comma Separated Values (.csv)

### از برنامه‌نویسی (PHP):
```php
$questions = [
    [1, "سوال 1", "گزینه 1", "گزینه 2", "گزینه 3", "گزینه 4", 1],
    [2, "سوال 2", "گزینه 1", "گزینه 2", "گزینه 3", "گزینه 4", 2],
];

$fp = fopen('questions.csv', 'w');
fprintf($fp, chr(0xEF).chr(0xBB).chr(0xBF)); // UTF-8 BOM
foreach ($questions as $question) {
    fputcsv($fp, $question);
}
fclose($fp);
```
